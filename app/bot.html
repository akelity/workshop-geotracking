<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Workshop GeoTracking BOT</title>
    <script src="https://cdn.socket.io/4.5.3/socket.io.min.js"
            integrity="sha384-WPFUvHkB1aHA5TDSZi6xtDgkF0wXJcIIxXhC6h8OT8EH3fC5PWro5pWJ1THjcfEi"
            crossorigin="anonymous"></script>
</head>
<body>
<h1>Il bot sta lavorando! :)</h1>
<script>
    // Socket
    const socket = io("ws://localhost:3000");
    
    // BOT Script
    const bot = () => {
        const path = [
            [9.15586,45.467053],
            [9.154058,45.466482],
            [9.16986,45.46761],
            [9.173,45.46772],
            [9.1734,45.46752],
            [9.17364,45.46778],
            [9.177189,45.467986],
            [9.17976,45.468894],
            [9.181584,45.470143],
            [9.179031,45.472626],
            [9.176885,45.472641],
            [9.17534,45.471918],
            [9.17976,45.468894],
            [9.177486,45.468006],
            [9.17725,45.468563],
            [9.178087,45.46909],
            [9.179417,45.468623],
            [9.181284,45.468924],
            [9.181863,45.470068],
            [9.181348,45.471211],
            [9.182417,45.471757],
            [9.18731,45.472841],
            [9.18761,45.471878],
            [9.187746,45.472034],
            [9.187657,45.471783],
            [9.187592,45.47088],
            [9.188515,45.468488],
            [9.189867,45.467524],
            [9.189933,45.467432],
            [9.190083,45.466597],
            [9.190008,45.465664],
            [9.190008,45.46467],
            [9.190115,45.464332],
            [9.191306,45.462947],
            [9.190396,45.464789],
            [9.190214,45.465624],
            [9.189718,45.464362],
            [9.188699,45.464678],
            [9.182271,45.467961],
            [9.180168,45.465689],
            [9.177378,45.465959],
            [9.175683,45.466005],
            [9.171864,45.465704],
            [9.171932,45.465654],
            [9.181845,45.468378],
            [9.191329,45.462885],
            [9.190021,45.464661],
            [9.171456,45.465704],
            [9.170576,45.465749],
            [9.167079,45.465869],
            [9.163324,45.46629],
            [9.163259,45.466215],
            [9.15562,45.466817],
            [9.155173,45.466632],
            [9.155964,45.467028],
            [9.16695,45.46605],
            [9.169482,45.46763],
            [9.169464,45.467625],
            [9.188429,45.464771],
            [9.185296,45.466005],
            [9.181799,45.468503],
            [9.17088,45.465789],
            [9.176974,45.468137],
            [9.189634,45.467294]
        ];
        let index = 0;

        setInterval(function() {
            socket.emit('positionToServer', {
                latitude: path[index][1],
                longitude: path[index][0]
            });
            if (++index > path.length-1) index = 0;
        }, 1000);
    }
    
    // Start BOT
    bot();
</script>
</body>
</html>